import { Directive, EventEmitter, Input, Output } from '@angular/core';
import { PoChartMathsService } from '../../services/po-chart-maths.service';
export class PoChartBarBaseComponent {
    constructor(mathsService) {
        this.mathsService = mathsService;
        this.barClick = new EventEmitter();
        this.barHover = new EventEmitter();
        this._containerSize = {};
        this._range = {};
        this._series = [];
    }
    set range(value) {
        if (value instanceof Object && !(value instanceof Array)) {
            this._range = value;
            this.calculateSeriesPathsCoordinates(this.containerSize, this._series, this._range);
        }
    }
    get range() {
        return this._range;
    }
    set containerSize(value) {
        this._containerSize = value;
        this.calculateSeriesPathsCoordinates(this._containerSize, this.series, this.range);
    }
    get containerSize() {
        return this._containerSize;
    }
    set series(seriesList) {
        const seriesDataArrayFilter = seriesList.filter(serie => Array.isArray(serie.data));
        if (seriesDataArrayFilter.length) {
            this._series = seriesDataArrayFilter;
            this.seriesGreaterLength = this.mathsService.seriesGreaterLength(this.series);
            this.calculateSeriesPathsCoordinates(this.containerSize, seriesDataArrayFilter, this.range);
        }
        else {
            this._series = [];
        }
    }
    get series() {
        return this._series;
    }
    onSerieBarClick(selectedItem) {
        this.barClick.emit(selectedItem);
    }
    onSerieBarHover(selectedItem) {
        this.barHover.emit(selectedItem);
    }
    trackBy(index) {
        return index;
    }
    calculateSeriesPathsCoordinates(containerSize, series, range) {
        this.seriesPathsCoordinates = series.map((serie, seriesIndex) => {
            if (Array.isArray(serie.data)) {
                let pathCoordinates = [];
                serie.data.forEach((data, serieDataIndex) => {
                    if (this.mathsService.verifyIfFloatOrInteger(data)) {
                        const coordinates = this.barCoordinates(seriesIndex, serieDataIndex, containerSize, range, data);
                        const category = this.serieCategory(serieDataIndex, this.categories);
                        const label = serie['label'];
                        const color = serie['color'];
                        const tooltip = serie['tooltip'];
                        const tooltipLabel = this.getTooltipLabel(data, label, tooltip);
                        pathCoordinates = [...pathCoordinates, { category, color, label, tooltipLabel, data, coordinates }];
                    }
                });
                return pathCoordinates;
            }
        });
    }
    getTooltipLabel(data, label, tooltipLabel) {
        const dataLabel = label ? `${label}: ` : '';
        const dataValue = data.toString();
        return tooltipLabel || `${dataLabel}${dataValue}`;
    }
    serieCategory(index, categories = []) {
        var _a;
        return (_a = categories[index]) !== null && _a !== void 0 ? _a : undefined;
    }
}
PoChartBarBaseComponent.decorators = [
    { type: Directive }
];
PoChartBarBaseComponent.ctorParameters = () => [
    { type: PoChartMathsService }
];
PoChartBarBaseComponent.propDecorators = {
    categories: [{ type: Input, args: ['p-categories',] }],
    barClick: [{ type: Output, args: ['p-bar-click',] }],
    barHover: [{ type: Output, args: ['p-bar-hover',] }],
    range: [{ type: Input, args: ['p-range',] }],
    containerSize: [{ type: Input, args: ['p-container-size',] }],
    series: [{ type: Input, args: ['p-series',] }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tY2hhcnQtYmFyLWJhc2UuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvdWkvc3JjL2xpYi9jb21wb25lbnRzL3BvLWNoYXJ0L3BvLWNoYXJ0LWNvbnRhaW5lci9wby1jaGFydC1iYXIvcG8tY2hhcnQtYmFyLWJhc2UuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFdkUsT0FBTyxFQUFFLG1CQUFtQixFQUFFLE1BQU0sdUNBQXVDLENBQUM7QUFRNUUsTUFBTSxPQUFnQix1QkFBdUI7SUFxRDNDLFlBQXNCLFlBQWlDO1FBQWpDLGlCQUFZLEdBQVosWUFBWSxDQUFxQjtRQWxEaEMsYUFBUSxHQUFHLElBQUksWUFBWSxFQUFPLENBQUM7UUFFbkMsYUFBUSxHQUFHLElBQUksWUFBWSxFQUFPLENBQUM7UUFNbEQsbUJBQWMsR0FBeUIsRUFBRSxDQUFDO1FBQzFDLFdBQU0sR0FBd0IsRUFBRSxDQUFDO1FBQ2pDLFlBQU8sR0FBd0IsRUFBRSxDQUFDO0lBd0NnQixDQUFDO0lBdEMzRCxJQUFzQixLQUFLLENBQUMsS0FBMEI7UUFDcEQsSUFBSSxLQUFLLFlBQVksTUFBTSxJQUFJLENBQUMsQ0FBQyxLQUFLLFlBQVksS0FBSyxDQUFDLEVBQUU7WUFDeEQsSUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUM7WUFFcEIsSUFBSSxDQUFDLCtCQUErQixDQUFDLElBQUksQ0FBQyxhQUFhLEVBQUUsSUFBSSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7U0FDckY7SUFDSCxDQUFDO0lBRUQsSUFBSSxLQUFLO1FBQ1AsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDO0lBQ3JCLENBQUM7SUFFRCxJQUErQixhQUFhLENB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T0FBTyxlQUFlLENBQUM7YUFDeEI7UUFDSCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFTyxlQUFlLENBQUMsSUFBWSxFQUFFLEtBQWEsRUFBRSxZQUFvQjtRQUN2RSxNQUFNLFNBQVMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztRQUM1QyxNQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7UUFFbEMsT0FBTyxZQUFZLElBQUksR0FBRyxTQUFTLEdBQUcsU0FBUyxFQUFFLENBQUM7SUFDcEQsQ0FBQztJQUVPLGFBQWEsQ0FBQyxLQUFhLEVBQUUsYUFBNEIsRUFBRTs7UUFDakUsT0FBTyxNQUFBLFVBQVUsQ0FBQyxLQUFLLENBQUMsbUNBQUksU0FBUyxDQUFDO0lBQ3hDLENBQUM7OztZQXpHRixTQUFTOzs7WUFQRCxtQkFBbUI7Ozt5QkFTekIsS0FBSyxTQUFDLGNBQWM7dUJBRXBCLE1BQU0sU0FBQyxhQUFhO3VCQUVwQixNQUFNLFNBQUMsYUFBYTtvQkFVcEIsS0FBSyxTQUFDLFNBQVM7NEJBWWYsS0FBSyxTQUFDLGtCQUFrQjtxQkFVeEIsS0FBSyxTQUFDLFVBQVUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEaXJlY3RpdmUsIEV2ZW50RW1pdHRlciwgSW5wdXQsIE91dHB1dCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5pbXBvcnQgeyBQb0NoYXJ0TWF0aHNTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvcG8tY2hhcnQtbWF0aHMuc2VydmljZSc7XG5cbmltcG9ydCB7IFBvQ2hhcnRDb250YWluZXJTaXplIH0gZnJvbSAnLi4vLi4vaW50ZXJmYWNlcy9wby1jaGFydC1jb250YWluZXItc2l6ZS5pbnRlcmZhY2UnO1xuaW1wb3J0IHsgUG9DaGFydE1pbk1heFZhbHVlcyB9IGZyb20gJy4uLy4uL2ludGVyZmFjZXMvcG8tY2hhcnQtbWluLW1heC12YWx1ZXMuaW50ZXJmYWNlJztcbmltcG9ydCB7IFBvQ2hhcnRCYXJDb29yZGluYXRlcyB9IGZyb20gJy4uLy4uL2ludGVyZmFjZXMvcG8tY2hhcnQtYmFyLWNvb3JkaW5hdGVzLmludGVyZmFjZSc7XG5pbXBvcnQgeyBQb0NoYXJ0U2VyaWUgfSBmcm9tICcuLi8uLi9pbnRlcmZhY2VzL3BvLWNoYXJ0LXNlcmllLmludGVyZmFjZSc7XG5cbkBEaXJlY3RpdmUoKVxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFBvQ2hhcnRCYXJCYXNlQ29tcG9uZW50IHtcbiAgQElucHV0KCdwLWNhdGVnb3JpZXMnKSBjYXRlZ29yaWVzOiBBcnJheTxzdHJpbmc+O1xuXG4gIEBPdXRwdXQoJ3AtYmFyLWNsaWNrJykgYmFyQ2xpY2sgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcblxuICBAT3V0cHV0KCdwLWJhci1ob3ZlcicpIGJhckhvdmVyID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG5cbiAgc2VyaWVzUGF0aHNDb29yZGluYXRlczogQXJyYXk8QXJyYXk8UG9DaGFydEJhckNvb3JkaW5hdGVzPj47XG5cbiAgcHJvdGVjdGVkIHNlcmllc0dyZWF0ZXJMZW5ndGg6IG51bWJlcjtcblxuICBwcml2YXRlIF9jb250YWluZXJTaXplOiBQb0NoYXJ0Q29udGFpbmVyU2l6ZSA9IHt9O1xuICBwcml2YXRlIF9yYW5nZTogUG9DaGFydE1pbk1heFZhbHVlcyA9IHt9O1xuICBwcml2YXRlIF9zZXJpZXM6IEFycmF5PFBvQ2hhcnRTZXJpZT4gPSBbXTtcblxuICBASW5wdXQoJ3AtcmFuZ2UnKSBzZXQgcmFuZ2UodmFsdWU6IFBvQ2hhcnRNaW5NYXhWYWx1ZXMpIHtcbiAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBPYmplY3QgJiYgISh2YWx1ZSBpbnN0YW5jZW9mIEFycmF5KSkge1xuICAgICAgdGhpcy5fcmFuZ2UgPSB2YWx1ZTtcblxuICAgICAgdGhpcy5jYWxjdWxhdGVTZXJpZXNQYXRoc0Nvb3JkaW5hdGVzKHRoaXMuY29udGFpbmVyU2l6ZSwgdGhpcy5fc2VyaWVzLCB0aGlzLl9yYW5nZSk7XG4gICAgfVxuICB9XG5cbiAgZ2V0IHJhbmdlKCkge1xuICAgIHJldHVybiB0aGlzLl9yYW5nZTtcbiAgfVxuXG4gIEBJbnB1dCgncC1jb250YWluZXItc2l6ZScpIHNldCBjb250YWluZXJTaXplKHZhbHVlOiBQb0NoYXJ0Q29udGFpbmVyU2l6ZSkge1xuICAgIHRoaXMuX2NvbnRhaW5lclNpemUgPSB2YWx1ZTtcblxuICAgIHRoaXMuY2FsY3VsYXRlU2VyaWVzUGF0aHNDb29yZGluYXRlcyh0aGlzLl9jb250YWluZXJTaXplLCB0aGlzLnNlcmllcywgdGhpcy5yYW5nZSk7XG4gIH1cblxuICBnZXQgY29udGFpbmVyU2l6ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fY29udGFpbmVyU2l6ZTtcbiAgfVxuXG4gIEBJbnB1dCgncC1zZXJpZXMnKSBzZXQgc2VyaWVzKHNlcmllc0xpc3Q6IEFycmF5PFBvQ2hhcnRTZXJpZT4pIHtcbiAgICBjb25zdCBzZXJpZXNEYXRhQXJyYXlGaWx0ZXIgPSBzZXJpZXNMaXN0LmZpbHRlcihzZXJpZSA9PiBBcnJheS5pc0FycmF5KHNlcmllLmRhdGEpKTtcblxuICAgIGlmIChzZXJpZXNEYXRhQXJyYXlGaWx0ZXIubGVuZ3RoKSB7XG4gICAgICB0aGlzLl9zZXJpZXMgPSBzZXJpZXNEYXRhQXJyYXlGaWx0ZXI7XG4gICAgICB0aGlzLnNlcmllc0dyZWF0ZXJMZW5ndGggPSB0aGlzLm1hdGhzU2VydmljZS5zZXJpZXNHcmVhdGVyTGVuZ3RoKHRoaXMuc2VyaWVzKTtcbiAgICAgIHRoaXMuY2FsY3VsYXRlU2VyaWVzUGF0aHNDb29yZGluYXRlcyh0aGlzLmNvbnRhaW5lclNpemUsIHNlcmllc0RhdGFBcnJheUZpbHRlciwgdGhpcy5yYW5nZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3NlcmllcyA9IFtdO1xuICAgIH1cbiAgfVxuXG4gIGdldCBzZXJpZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3NlcmllcztcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBtYXRoc1NlcnZpY2U6IFBvQ2hhcnRNYXRoc1NlcnZpY2UpIHt9XG5cbiAgb25TZXJpZUJhckNsaWNrKHNlbGVjdGVkSXRlbTogYW55KSB7XG4gICAgdGhpcy5iYXJDbGljay5lbWl0KHNlbGVjdGVkSXRlbSk7XG4gIH1cblxuICBvblNlcmllQmFySG92ZXIoc2VsZWN0ZWRJdGVtOiBhbnkpIHtcbiAgICB0aGlzLmJhckhvdmVyLmVtaXQoc2VsZWN0ZWRJdGVtKTtcbiAgfVxuXG4gIHRyYWNrQnkoaW5kZXgpIHtcbiAgICByZXR1cm4gaW5kZXg7XG4gIH1cblxuICBwcml2YXRlIGNhbGN1bGF0ZVNlcmllc1BhdGhzQ29vcmRpbmF0ZXMoXG4gICAgY29udGFpbmVyU2l6ZTogUG9DaGFydENvbnRhaW5lclNpemUsXG4gICAgc2VyaWVzOiBBcnJheTxQb0NoYXJ0U2VyaWU+LFxuICAgIHJhbmdlOiBQb0NoYXJ0TWluTWF4VmFsdWVzXG4gICkge1xuICAgIHRoaXMuc2VyaWVzUGF0aHNDb29yZGluYXRlcyA9IHNlcmllcy5tYXAoKHNlcmllOiBQb0NoYXJ0U2VyaWUsIHNlcmllc0luZGV4KSA9PiB7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShzZXJpZS5kYXRhKSkge1xuICAgICAgICBsZXQgcGF0aENvb3JkaW5hdGVzOiBBcnJheTxQb0NoYXJ0QmFyQ29vcmRpbmF0ZXM+ID0gW107XG5cbiAgICAgICAgc2VyaWUuZGF0YS5mb3JFYWNoKChkYXRhLCBzZXJpZURhdGFJbmRleCkgPT4ge1xuICAgICAgICAgIGlmICh0aGlzLm1hdGhzU2VydmljZS52ZXJpZnlJZkZsb2F0T3JJbnRlZ2VyKGRhdGEpKSB7XG4gICAgICAgICAgICBjb25zdCBjb29yZGluYXRlcyA9IHRoaXMuYmFyQ29vcmRpbmF0ZXMoc2VyaWVzSW5kZXgsIHNlcmllRGF0YUluZGV4LCBjb250YWluZXJTaXplLCByYW5nZSwgZGF0YSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGNhdGVnb3J5ID0gdGhpcy5zZXJpZUNhdGVnb3J5KHNlcmllRGF0YUluZGV4LCB0aGlzLmNhdGVnb3JpZXMpO1xuICAgICAgICAgICAgY29uc3QgbGFiZWwgPSBzZXJpZVsnbGFiZWwnXTtcbiAgICAgICAgICAgIGNvbnN0IGNvbG9yID0gc2VyaWVbJ2NvbG9yJ107XG4gICAgICAgICAgICBjb25zdCB0b29sdGlwID0gc2VyaWVbJ3Rvb2x0aXAnXTtcbiAgICAgICAgICAgIGNvbnN0IHRvb2x0aXBMYWJlbCA9IHRoaXMuZ2V0VG9vbHRpcExhYmVsKGRhdGEsIGxhYmVsLCB0b29sdGlwKTtcblxuICAgICAgICAgICAgcGF0aENvb3JkaW5hdGVzID0gWy4uLnBhdGhDb29yZGluYXRlcywgeyBjYXRlZ29yeSwgY29sb3IsIGxhYmVsLCB0b29sdGlwTGFiZWwsIGRhdGEsIGNvb3JkaW5hdGVzIH1dO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHBhdGhDb29yZGluYXRlcztcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0VG9vbHRpcExhYmVsKGRhdGE6IG51bWJlciwgbGFiZWw6IHN0cmluZywgdG9vbHRpcExhYmVsOiBzdHJpbmcpIHtcbiAgICBjb25zdCBkYXRhTGFiZWwgPSBsYWJlbCA/IGAke2xhYmVsfTogYCA6ICcnO1xuICAgIGNvbnN0IGRhdGFWYWx1ZSA9IGRhdGEudG9TdHJpbmcoKTtcblxuICAgIHJldHVybiB0b29sdGlwTGFiZWwgfHwgYCR7ZGF0YUxhYmVsfSR7ZGF0YVZhbHVlfWA7XG4gIH1cblxuICBwcml2YXRlIHNlcmllQ2F0ZWdvcnkoaW5kZXg6IG51bWJlciwgY2F0ZWdvcmllczogQXJyYXk8c3RyaW5nPiA9IFtdKSB7XG4gICAgcmV0dXJuIGNhdGVnb3JpZXNbaW5kZXhdID8/IHVuZGVmaW5lZDtcbiAgfVxuXG4gIHByb3RlY3RlZCBhYnN0cmFjdCBiYXJDb29yZGluYXRlcyhcbiAgICBzZXJpZXNJbmRleDogbnVtYmVyLFxuICAgIHNlcmllRGF0YUluZGV4OiBudW1iZXIsXG4gICAgY29udGFpbmVyU2l6ZTogUG9DaGFydENvbnRhaW5lclNpemUsXG4gICAgcmFuZ2U6IFBvQ2hhcnRNaW5NYXhWYWx1ZXMsXG4gICAgc2VyaWVWYWx1ZTogbnVtYmVyXG4gICk7XG59XG4iXX0=