import { __decorate } from "tslib";
import { ChangeDetectorRef, Component, Input, ViewChild } from '@angular/core';
import { InputBoolean } from '../../../../../decorators';
import { isIE } from '../../../../../utils/util';
const pathDashoffsetDefaultWidth = 0;
export class PoChartPathComponent {
    constructor(changeDetector) {
        this.changeDetector = changeDetector;
        this.isActive = true;
        this.chartLine = false;
    }
    set color(value) {
        this._color = value.includes('po-color') && this.chartLine ? value.replace('po-color', 'po-border-color') : value;
    }
    get color() {
        return this._color;
    }
    set animate(value) {
        this._animate = value;
        if (!this.animate) {
            this.pathWidth = pathDashoffsetDefaultWidth;
        }
    }
    get animate() {
        return this._animate;
    }
    ngAfterViewInit() {
        if (!isIE()) {
            this.pathAnimation();
        }
    }
    pathAnimation() {
        this.pathWidth = this.chartPath.nativeElement.getTotalLength();
        this.changeDetector.detectChanges();
        setTimeout(this.preventsAnimatingAgain.bind(this), 700);
    }
    // Redefine pathWidth para zero após o período da animação para que a linha se expanda normalmente on resize.
    preventsAnimatingAgain() {
        this.pathWidth = pathDashoffsetDefaultWidth;
    }
}
PoChartPathComponent.decorators = [
    { type: Component, args: [{
                selector: '[po-chart-path]',
                template: "<svg:path #chartPath\n  class=\"po-chart-path\"\n  [class.po-chart-active-path]=\"isActive\"\n  [class.po-chart-line-path]=\"chartLine\"\n  [class]=\"color?.includes('po-border-color') || color?.includes('po-color') ? color : ''\"\n  [attr.fill]=\"chartLine ? 'none' : color\"\n  [attr.stroke-dasharray]=\"pathWidth\"\n  [attr.stroke-dashoffset]=\"pathWidth\"\n  [attr.stroke]=\"chartLine ? color : ''\"\n  [attr.d]=\"coordinates\">\n</svg:path> "
            },] }
];
PoChartPathComponent.ctorParameters = () => [
    { type: ChangeDetectorRef }
];
PoChartPathComponent.propDecorators = {
    isActive: [{ type: Input, args: ['p-is-active',] }],
    chartLine: [{ type: Input, args: ['p-chart-line',] }],
    coordinates: [{ type: Input, args: ['p-coordinates',] }],
    chartPath: [{ type: ViewChild, args: ['chartPath', { static: true },] }],
    color: [{ type: Input, args: ['p-color',] }],
    animate: [{ type: Input, args: ['p-animate',] }]
};
__decorate([
    InputBoolean()
], PoChartPathComponent.prototype, "isActive", void 0);
__decorate([
    InputBoolean()
], PoChartPathComponent.prototype, "chartLine", void 0);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tY2hhcnQtcGF0aC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy91aS9zcmMvbGliL2NvbXBvbmVudHMvcG8tY2hhcnQvcG8tY2hhcnQtY29udGFpbmVyL3BvLWNoYXJ0LWxpbmUvcG8tY2hhcnQtcGF0aC9wby1jaGFydC1wYXRoLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUFpQixpQkFBaUIsRUFBRSxTQUFTLEVBQWMsS0FBSyxFQUFFLFNBQVMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUUxRyxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFFekQsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLDJCQUEyQixDQUFDO0FBRWpELE1BQU0sMEJBQTBCLEdBQUcsQ0FBQyxDQUFDO0FBTXJDLE1BQU0sT0FBTyxvQkFBb0I7SUFrQy9CLFlBQW9CLGNBQWlDO1FBQWpDLG1CQUFjLEdBQWQsY0FBYyxDQUFtQjtRQWpDZixhQUFRLEdBQVksSUFBSSxDQUFDO1FBRXhCLGNBQVMsR0FBWSxLQUFLLENBQUM7SUErQlYsQ0FBQztJQXBCekQsSUFBc0IsS0FBSyxDQUFDLEtBQWE7UUFDdkMsSUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsVUFBVSxFQUFFLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQztJQUNwSCxDQUFDO0lBRUQsSUFBSSxLQUFLO1FBQ1AsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDO0lBQ3JCLENBQUM7SUFFRCxJQUF3QixPQUFPLENBQUMsS0FBYztRQUM1QyxJQUFJLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQztRQUV0QixJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRTtZQUNqQixJQUFJLENBQUMsU0FBUyxHQUFHLDBCQUEwQixDQUFDO1NBQzdDO0lBQ0gsQ0FBQztJQUVELElBQUksT0FBTztRQUNULE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQztJQUN2QixDQUFDO0lBSUQsZUFBZTtRQUNiLElBQUksQ0FBQyxJQUFJLEVBQUUsRUFBRTtZQUNYLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztTQUN0QjtJQUNILENBQUM7SUFFTyxhQUFhO1FBQ25CLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxhQUFhLENBQUMsY0FBYyxFQUFFLENBQUM7UUFDL0QsSUFBSSxDQUFDLGNBQWMsQ0FBQyxhQUFhLEVBQUUsQ0FBQztRQUNwQyxVQUFVLENBQUMsSUFBSSxDQUFDLHNCQUFzQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztJQUMxRCxDQUFDO0lBRUQsNkdBQTZHO0lBQ3JHLHNCQUFzQjtRQUM1QixJQUFJLENBQUMsU0FBUyxHQUFHLDBCQUEwQixDQUFDO0lBQzlDLENBQUM7OztZQXZERixTQUFTLFNBQUM7Z0JBQ1QsUUFBUSxFQUFFLGlCQUFpQjtnQkFDM0IsMGNBQTRDO2FBQzdDOzs7WUFYdUIsaUJBQWlCOzs7dUJBYXRDLEtBQUssU0FBQyxhQUFhO3dCQUVuQixLQUFLLFNBQUMsY0FBYzswQkFFcEIsS0FBSyxTQUFDLGVBQWU7d0JBRXJCLFNBQVMsU0FBQyxXQUFXLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFO29CQU92QyxLQUFLLFNBQUMsU0FBUztzQkFRZixLQUFLLFNBQUMsV0FBVzs7QUFyQm9CO0lBQWYsWUFBWSxFQUFFO3NEQUEwQjtBQUV4QjtJQUFmLFlBQVksRUFBRTt1REFBNEIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBZnRlclZpZXdJbml0LCBDaGFuZ2VEZXRlY3RvclJlZiwgQ29tcG9uZW50LCBFbGVtZW50UmVmLCBJbnB1dCwgVmlld0NoaWxkIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbmltcG9ydCB7IElucHV0Qm9vbGVhbiB9IGZyb20gJy4uLy4uLy4uLy4uLy4uL2RlY29yYXRvcnMnO1xuXG5pbXBvcnQgeyBpc0lFIH0gZnJvbSAnLi4vLi4vLi4vLi4vLi4vdXRpbHMvdXRpbCc7XG5cbmNvbnN0IHBhdGhEYXNob2Zmc2V0RGVmYXVsdFdpZHRoID0gMDtcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnW3BvLWNoYXJ0LXBhdGhdJyxcbiAgdGVtcGxhdGVVcmw6ICcuL3BvLWNoYXJ0LXBhdGguY29tcG9uZW50LnN2Zydcbn0pXG5leHBvcnQgY2xhc3MgUG9DaGFydFBhdGhDb21wb25lbnQgaW1wbGVtZW50cyBBZnRlclZpZXdJbml0IHtcbiAgQElucHV0KCdwLWlzLWFjdGl2ZScpIEBJbnB1dEJvb2xlYW4oKSBpc0FjdGl2ZTogYm9vbGVhbiA9IHRydWU7XG5cbiAgQElucHV0KCdwLWNoYXJ0LWxpbmUnKSBASW5wdXRCb29sZWFuKCkgY2hhcnRMaW5lOiBib29sZWFuID0gZmFsc2U7XG5cbiAgQElucHV0KCdwLWNvb3JkaW5hdGVzJykgY29vcmRpbmF0ZXM6IHN0cmluZztcblxuICBAVmlld0NoaWxkKCdjaGFydFBhdGgnLCB7IHN0YXRpYzogdHJ1ZSB9KSBjaGFydFBhdGg6IEVsZW1lbnRSZWY7XG5cbiAgcGF0aFdpZHRoOiBudW1iZXI7XG5cbiAgcHJpdmF0ZSBfYW5pbWF0ZTogYm9vbGVhbjtcbiAgcHJpdmF0ZSBfY29sb3I6IHN0cmluZztcblxuICBASW5wdXQoJ3AtY29sb3InKSBzZXQgY29sb3IodmFsdWU6IHN0cmluZykge1xuICAgIHRoaXMuX2NvbG9yID0gdmFsdWUuaW5jbHVkZXMoJ3BvLWNvbG9yJykgJiYgdGhpcy5jaGFydExpbmUgPyB2YWx1ZS5yZXBsYWNlKCdwby1jb2xvcicsICdwby1ib3JkZXItY29sb3InKSA6IHZhbHVlO1xuICB9XG5cbiAgZ2V0IGNvbG9yKCkge1xuICAgIHJldHVybiB0aGlzLl9jb2xvcjtcbiAgfVxuXG4gIEBJbnB1dCgncC1hbmltYXRlJykgc2V0IGFuaW1hdGUodmFsdWU6IGJvb2xlYW4pIHtcbiAgICB0aGlzLl9hbmltYXRlID0gdmFsdWU7XG5cbiAgICBpZiAoIXRoaXMuYW5pbWF0ZSkge1xuICAgICAgdGhpcy5wYXRoV2lkdGggPSBwYXRoRGFzaG9mZnNldERlZmF1bHRXaWR0aDtcbiAgICB9XG4gIH1cblxuICBnZXQgYW5pbWF0ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fYW5pbWF0ZTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgY2hhbmdlRGV0ZWN0b3I6IENoYW5nZURldGVjdG9yUmVmKSB7fVxuXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcbiAgICBpZiAoIWlzSUUoKSkge1xuICAgICAgdGhpcy5wYXRoQW5pbWF0aW9uKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBwYXRoQW5pbWF0aW9uKCkge1xuICAgIHRoaXMucGF0aFdpZHRoID0gdGhpcy5jaGFydFBhdGgubmF0aXZlRWxlbWVudC5nZXRUb3RhbExlbmd0aCgpO1xuICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3IuZGV0ZWN0Q2hhbmdlcygpO1xuICAgIHNldFRpbWVvdXQodGhpcy5wcmV2ZW50c0FuaW1hdGluZ0FnYWluLmJpbmQodGhpcyksIDcwMCk7XG4gIH1cblxuICAvLyBSZWRlZmluZSBwYXRoV2lkdGggcGFyYSB6ZXJvIGFww7NzIG8gcGVyw61vZG8gZGEgYW5pbWHDp8OjbyBwYXJhIHF1ZSBhIGxpbmhhIHNlIGV4cGFuZGEgbm9ybWFsbWVudGUgb24gcmVzaXplLlxuICBwcml2YXRlIHByZXZlbnRzQW5pbWF0aW5nQWdhaW4oKSB7XG4gICAgdGhpcy5wYXRoV2lkdGggPSBwYXRoRGFzaG9mZnNldERlZmF1bHRXaWR0aDtcbiAgfVxufVxuIl19