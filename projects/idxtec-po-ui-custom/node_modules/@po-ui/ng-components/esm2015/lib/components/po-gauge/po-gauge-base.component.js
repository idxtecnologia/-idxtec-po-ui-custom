import { Input, Directive } from '@angular/core';
import { convertToInt } from '../../utils/util';
import { poGaugeMinHeight } from './po-gauge-default-values.constant';
import { PoColorService } from '../../services/po-color/po-color.service';
/**
 * @description
 *
 * O componente `po-gauge` provê a representação de um valor através de um arco. É muito comum, por exemplo, para demonstrar o desempenho ou progresso de algo.
 * O `po-gauge` possui dois tipos de tratamentos:
 * - É possível demonstrar um dado percentual simples em conjunto com uma descrição resumida em seu interior;
 * - Para um demonstrativo mais elaborado, consegue-se definir alcances em cores, um breve texto descritivo e um ponteiro indicando o valor desejado.
 *
 * #### Guia de uso para Gráficos
 *
 * > Veja nosso [guia de uso para gráficos](/guides/guide-charts) para auxiliar na construção do seu gráfico,
 * informando em qual caso utilizar, o que devemos evitar e boas práticas relacionada a cores.
 */
export class PoGaugeBaseComponent {
    constructor(colorService) {
        this.colorService = colorService;
        this._height = poGaugeMinHeight;
        this._ranges = [];
    }
    /**
     * @optional
     *
     * @description
     *
     * Define o texto que será exibido no gauge.
     * Há dois posicionamentos para ele:
     * - Se houver definição para `p-ranges`, o descritivo será exibido no topo do container, ficando acima do gauge;
     * - Na ausência de `p-ranges`, será incorporado dentro do arco do gauge, e abaixo de `p-value`.
     *
     * Para ambos os casos, se o conteúdo ultrapassar a área designada, serão geradas automaticamente reticências.
     * No entanto, será possível visualizar a mensagem através de um tooltip no passar do mouse sobre o texto.
     *
     * > Para uma melhor experiência do usuário, é recomendado um descritivo breve e com poucas palavras.
     * Desta forma evita-se o *overflow* do texto.
     */
    set description(value) {
        this._description = value;
        this.svgContainerSize();
    }
    get description() {
        return this._description;
    }
    /**
     * @optional
     *
     * @description
     *
     * Define a altura do gauge.
     *
     * O valor mínimo aceito é 300px.
     *
     * @default `300px`
     */
    set height(value) {
        this._height = this.setGaugeHeight(value);
        this.svgContainerSize();
    }
    get height() {
        return this._height;
    }
    /**
     * @optional
     *
     * @description
     *
     * Definição para o alcance de cores. Ao adicionar pelo menos um item na lista,
     * incorpora-se o ponteiro que assinala o valor passado em `p-value`.
     * Se o valor de `p-value` for inferior ao mínimo valor definido em `PoGaugeRanges.from`, o domínio mínimo do gauge será `p-value`.
     * A mesma regra prevalece para valores máximos.
     */
    set ranges(value) {
        this._ranges = Array.isArray(value) ? this.verifyColors(value) : [];
        this.svgContainerSize();
    }
    get ranges() {
        return this._ranges;
    }
    /**
     * @optional
     *
     * @description
     *
     * Define o título do gauge.
     */
    set title(value) {
        this._title = value;
        this.svgContainerSize();
    }
    get title() {
        return this._title;
    }
    /**
     * @optional
     *
     * @description
     *
     * Valor referente ao valor da série. Seu comportamento segue a seguintes regras:
     *
     * - Sem `p-ranges`: Os valores passados para `p-value` e `p-description` serão centralizados no interior do arco.
     * A base do valor será percentual tendo como base os alcances entre zero e 100%. Se passado um valor superior a 100,
     * A colorização do gauge será completa e o valor passado será exibido no interior do arco.
     * - Com `p-ranges`: A descrição será exibida acima do gauge e haverá um ponteiro marcando o valor passado em `p-value`.
     * Considerando que o alcance em `ranges` é aberto, então a escala de `p-value` será em relação ao menor/maior alcance
     * absoluto definido em `p-ranges`.
     * Se passado um `p-value` inferior em relação ao mínimo valor definido em `p-ranges`, o domínio mínimo do gauge partirá de `p-value`.
     * A mesma regra prevalece para valores máximos.
     *
     */
    set value(gaugeValue) {
        if (typeof gaugeValue === 'number' || (typeof gaugeValue === 'string' && gaugeValue.trim())) {
            const value = !isNaN(gaugeValue) ? Number(gaugeValue) : undefined;
            this._value = value;
        }
        else {
            this._value = undefined;
        }
    }
    get value() {
        return this._value;
    }
    verifyColors(ranges) {
        return this.colorService.getColors(ranges);
    }
    setGaugeHeight(height) {
        const gaugeHeight = convertToInt(height);
        return gaugeHeight && gaugeHeight > poGaugeMinHeight ? gaugeHeight : poGaugeMinHeight;
    }
}
PoGaugeBaseComponent.decorators = [
    { type: Directive }
];
PoGaugeBaseComponent.ctorParameters = () => [
    { type: PoColorService }
];
PoGaugeBaseComponent.propDecorators = {
    description: [{ type: Input, args: ['p-description',] }],
    height: [{ type: Input, args: ['p-height',] }],
    ranges: [{ type: Input, args: ['p-ranges',] }],
    title: [{ type: Input, args: ['p-title',] }],
    value: [{ type: Input, args: ['p-value',] }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tZ2F1Z2UtYmFzZS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy91aS9zcmMvbGliL2NvbXBvbmVudHMvcG8tZ2F1Z2UvcG8tZ2F1Z2UtYmFzZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFakQsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBQ2hELE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLG9DQUFvQyxDQUFDO0FBRXRFLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSwwQ0FBMEMsQ0FBQztBQUkxRTs7Ozs7Ozs7Ozs7O0dBWUc7QUFFSCxNQUFNLE9BQWdCLG9CQUFvQjtJQXdIeEMsWUFBc0IsWUFBNEI7UUFBNUIsaUJBQVksR0FBWixZQUFZLENBQWdCO1FBdEgxQyxZQUFPLEdBQVcsZ0JBQWdCLENBQUM7UUFDbkMsWUFBTyxHQUF5QixFQUFFLENBQUM7SUFxSFUsQ0FBQztJQWpIdEQ7Ozs7Ozs7Ozs7Ozs7OztPQWVHO0lBQ0gsSUFBNEIsV0FBVyxDQUFDLEtBQWE7UUFDbkQsSUFBSSxDQUFDLFlBQVksR0FBRyxLQUFLLENBQUM7UUFFMUIsSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUM7SUFDMUIsQ0FBQztJQUVELElBQUksV0FBVztRQUNiLE9BQU8sSUFBSSxDQUFDLFlBQVksQ0FBQztJQUMzQixDQUFDO0lBRUQ7Ozs7Ozs7Ozs7T0FVRztJQUNILElBQXVCLE1BQU0sQ0FBQyxLQUFhO1FBQ3pDLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUMxQyxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztJQUMxQixDQUFDO0lBRUQsSUFBSSxNQUFNO1FBQ1IsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDO0lBQ3RCLENBQUM7SUFFRDs7Ozs7Ozs7O09BU0c7SUFDSCxJQUF1QixNQUFNLENBQUMsS0FBMkI7UUFDdkQsSUFBSSxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7UUFDcEUsSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUM7SUFDMUIsQ0FBQztJQUVELElBQUksTUFBTTtRQUNSLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQztJQUN0QixDQUFDO0lBRUQ7Ozs7OztPQU1HO0lBQ0gsSUFBc0IsS0FBSyxDQUFDLEtBQWE7UUFDdkMsSUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUM7UUFFcEIsSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUM7SUFDMUIsQ0FBQztJQUVELElBQUksS0FBSztRQUNQLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQztJQUNyQixDQUFDO0lBRUQ7Ozs7Ozs7Ozs7Ozs7Ozs7T0FnQkc7SUFDSCxJQUFzQixLQUFLLENBQUMsVUFBa0I7UUFDNUMsSUFBSSxPQUFPLFVBQVUsS0FBSyxRQUFRLElBQUksQ0FBQyxPQUFPLFVBQVUsS0FBSyxRQUFRLElBQWEsVUFBVyxDQUFDLElBQUksRUFBRSxDQUFDLEVBQUU7WUFDckcsTUFBTSxLQUFLLEdBQUcsQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDO1lBRWxFLElBQUksQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDO1NBQ3JCO2FBQU07WUFDTCxJQUFJLENBQUMsTUFBTSxHQUFHLFNBQVMsQ0FBQztTQUN6QjtJQUNILENBQUM7SUFFRCxJQUFJLEtBQUs7UUFDUCxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUM7SUFDckIsQ0FBQztJQUlPLFlBQVksQ0FBQyxNQUE0QjtRQUMvQyxPQUFPLElBQUksQ0FBQyxZQUFZLENBQUMsU0FBUyxDQUFnQixNQUFNLENBQUMsQ0FBQztJQUM1RCxDQUFDO0lBRU8sY0FBYyxDQUFDLE1BQWM7UUFDbkMsTUFBTSxXQUFXLEdBQUcsWUFBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBRXpDLE9BQU8sV0FBVyxJQUFJLFdBQVcsR0FBRyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQztJQUN4RixDQUFDOzs7WUFuSUYsU0FBUzs7O1lBakJELGNBQWM7OzswQkF5Q3BCLEtBQUssU0FBQyxlQUFlO3FCQXFCckIsS0FBSyxTQUFDLFVBQVU7cUJBbUJoQixLQUFLLFNBQUMsVUFBVTtvQkFnQmhCLEtBQUssU0FBQyxTQUFTO29CQTJCZixLQUFLLFNBQUMsU0FBUyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IElucHV0LCBEaXJlY3RpdmUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0IHsgY29udmVydFRvSW50IH0gZnJvbSAnLi4vLi4vdXRpbHMvdXRpbCc7XG5pbXBvcnQgeyBwb0dhdWdlTWluSGVpZ2h0IH0gZnJvbSAnLi9wby1nYXVnZS1kZWZhdWx0LXZhbHVlcy5jb25zdGFudCc7XG5cbmltcG9ydCB7IFBvQ29sb3JTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvcG8tY29sb3IvcG8tY29sb3Iuc2VydmljZSc7XG5cbmltcG9ydCB7IFBvR2F1Z2VSYW5nZXMgfSBmcm9tICcuL2ludGVyZmFjZXMvcG8tZ2F1Z2UtcmFuZ2VzLmludGVyZmFjZSc7XG5cbi8qKlxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogTyBjb21wb25lbnRlIGBwby1nYXVnZWAgcHJvdsOqIGEgcmVwcmVzZW50YcOnw6NvIGRlIHVtIHZhbG9yIGF0cmF2w6lzIGRlIHVtIGFyY28uIMOJIG11aXRvIGNvbXVtLCBwb3IgZXhlbXBsbywgcGFyYSBkZW1vbnN0cmFyIG8gZGVzZW1wZW5obyBvdSBwcm9ncmVzc28gZGUgYWxnby5cbiAqIE8gYHBvLWdhdWdlYCBwb3NzdWkgZG9pcyB0aXBvcyBkZSB0cmF0YW1lbnRvczpcbiAqIC0gw4kgcG9zc8OtdmVsIGRlbW9uc3RyYXIgdW0gZGFkbyBwZXJjZW50dWFsIHNpbXBsZXMgZW0gY29uanVudG8gY29tIHVtYSBkZXNjcmnDp8OjbyByZXN1bWlkYSBlbSBzZXUgaW50ZXJpb3I7XG4gKiAtIFBhcmEgdW0gZGVtb25zdHJhdGl2byBtYWlzIGVsYWJvcmFkbywgY29uc2VndWUtc2UgZGVmaW5pciBhbGNhbmNlcyBlbSBjb3JlcywgdW0gYnJldmUgdGV4dG8gZGVzY3JpdGl2byBlIHVtIHBvbnRlaXJvIGluZGljYW5kbyBvIHZhbG9yIGRlc2VqYWRvLlxuICpcbiAqICMjIyMgR3VpYSBkZSB1c28gcGFyYSBHcsOhZmljb3NcbiAqXG4gKiA+IFZlamEgbm9zc28gW2d1aWEgZGUgdXNvIHBhcmEgZ3LDoWZpY29zXSgvZ3VpZGVzL2d1aWRlLWNoYXJ0cykgcGFyYSBhdXhpbGlhciBuYSBjb25zdHJ1w6fDo28gZG8gc2V1IGdyw6FmaWNvLFxuICogaW5mb3JtYW5kbyBlbSBxdWFsIGNhc28gdXRpbGl6YXIsIG8gcXVlIGRldmVtb3MgZXZpdGFyIGUgYm9hcyBwcsOhdGljYXMgcmVsYWNpb25hZGEgYSBjb3Jlcy5cbiAqL1xuQERpcmVjdGl2ZSgpXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgUG9HYXVnZUJhc2VDb21wb25lbnQge1xuICBwcml2YXRlIF9kZXNjcmlwdGlvbjogc3RyaW5nO1xuICBwcml2YXRlIF9oZWlnaHQ6IG51bWJlciA9IHBvR2F1Z2VNaW5IZWlnaHQ7XG4gIHByaXZhdGUgX3JhbmdlczogQXJyYXk8UG9HYXVnZVJhbmdlcz4gPSBbXTtcbiAgcHJpdmF0ZSBfdGl0bGU6IHN0cmluZztcbiAgcHJpdmF0ZSBfdmFsdWU6IG51bWJlcjtcblxuICAvKipcbiAgICogQG9wdGlvbmFsXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBEZWZpbmUgbyB0ZXh0byBxdWUgc2Vyw6EgZXhpYmlkbyBubyBnYXVnZS5cbiAgICogSMOhIGRvaXMgcG9zaWNpb25hbWVudG9zIHBhcmEgZWxlOlxuICAgKiAtIFNlIGhvdXZlciBkZWZpbmnDp8OjbyBwYXJhIGBwLXJhbmdlc2AsIG8gZGVzY3JpdGl2byBzZXLDoSBleGliaWRvIG5vIHRvcG8gZG8gY29udGFpbmVyLCBmaWNhbmRvIGFjaW1hIGRvIGdhdWdlO1xuICAgKiAtIE5hIGF1c8OqbmNpYSBkZSBgcC1yYW5nZXNgLCBzZXLDoSBpbmNvcnBvcmFkbyBkZW50cm8gZG8gYXJjbyBkbyBnYXVnZSwgZSBhYmFpeG8gZGUgYHAtdmFsdWVgLlxuICAgKlxuICAgKiBQYXJhIGFtYm9zIG9zIGNhc29zLCBzZSBvIGNvbnRlw7pkbyB1bHRyYXBhc3NhciBhIMOhcmVhIGRlc2lnbmFkYSwgc2Vyw6NvIGdlcmFkYXMgYXV0b21hdGljYW1lbnRlIHJldGljw6puY2lhcy5cbiAgICogTm8gZW50YW50bywgc2Vyw6EgcG9zc8OtdmVsIHZpc3VhbGl6YXIgYSBtZW5zYWdlbSBhdHJhdsOpcyBkZSB1bSB0b29sdGlwIG5vIHBhc3NhciBkbyBtb3VzZSBzb2JyZSBvIHRleHRvLlxuICAgKlxuICAgKiA+IFBhcmEgdW1hIG1lbGhvciBleHBlcmnDqm5jaWEgZG8gdXN1w6FyaW8sIMOpIHJlY29tZW5kYWRvIHVtIGRlc2NyaXRpdm8gYnJldmUgZSBjb20gcG91Y2FzIHBhbGF2cmFzLlxuICAgKiBEZXN0YSBmb3JtYSBldml0YS1zZSBvICpvdmVyZmxvdyogZG8gdGV4dG8uXG4gICAqL1xuICBASW5wdXQoJ3AtZGVzY3JpcHRpb24nKSBzZXQgZGVzY3JpcHRpb24odmFsdWU6IHN0cmluZykge1xuICAgIHRoaXMuX2Rlc2NyaXB0aW9uID0gdmFsdWU7XG5cbiAgICB0aGlzLnN2Z0NvbnRhaW5lclNpemUoKTtcbiAgfVxuXG4gIGdldCBkZXNjcmlwdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fZGVzY3JpcHRpb247XG4gIH1cblxuICAvKipcbiAgICogQG9wdGlvbmFsXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBEZWZpbmUgYSBhbHR1cmEgZG8gZ2F1Z2UuXG4gICAqXG4gICAqIE8gdmFsb3IgbcOtbmltbyBhY2VpdG8gw6kgMzAwcHguXG4gICAqXG4gICAqIEBkZWZhdWx0IGAzMDBweGBcbiAgICovXG4gIEBJbnB1dCgncC1oZWlnaHQnKSBzZXQgaGVpZ2h0KHZhbHVlOiBudW1iZXIpIHtcbiAgICB0aGlzLl9oZWlnaHQgPSB0aGlzLnNldEdhdWdlSGVpZ2h0KHZhbHVlKTtcbiAgICB0aGlzLnN2Z0NvbnRhaW5lclNpemUoKTtcbiAgfVxuXG4gIGdldCBoZWlnaHQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5faGVpZ2h0O1xuICB9XG5cbiAgLyoqXG4gICAqIEBvcHRpb25hbFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogRGVmaW5pw6fDo28gcGFyYSBvIGFsY2FuY2UgZGUgY29yZXMuIEFvIGFkaWNpb25hciBwZWxvIG1lbm9zIHVtIGl0ZW0gbmEgbGlzdGEsXG4gICAqIGluY29ycG9yYS1zZSBvIHBvbnRlaXJvIHF1ZSBhc3NpbmFsYSBvIHZhbG9yIHBhc3NhZG8gZW0gYHAtdmFsdWVgLlxuICAgKiBTZSBvIHZhbG9yIGRlIGBwLXZhbHVlYCBmb3IgaW5mZXJpb3IgYW8gbcOtbmltbyB2YWxvciBkZWZpbmlkbyBlbSBgUG9HYXVnZVJhbmdlcy5mcm9tYCwgbyBkb23DrW5pbyBtw61uaW1vIGRvIGdhdWdlIHNlcsOhIGBwLXZhbHVlYC5cbiAgICogQSBtZXNtYSByZWdyYSBwcmV2YWxlY2UgcGFyYSB2YWxvcmVzIG3DoXhpbW9zLlxuICAgKi9cbiAgQElucHV0KCdwLXJhbmdlcycpIHNldCByYW5nZXModmFsdWU6IEFycmF5PFBvR2F1Z2VSYW5nZXM+KSB7XG4gICAgdGhpcy5fcmFuZ2VzID0gQXJyYXkuaXNBcnJheSh2YWx1ZSkgPyB0aGlzLnZlcmlmeUNvbG9ycyh2YWx1ZSkgOiBbXTtcbiAgICB0aGlzLnN2Z0NvbnRhaW5lclNpemUoKTtcbiAgfVxuXG4gIGdldCByYW5nZXMoKTogQXJyYXk8UG9HYXVnZVJhbmdlcz4ge1xuICAgIHJldHVybiB0aGlzLl9yYW5nZXM7XG4gIH1cblxuICAvKipcbiAgICogQG9wdGlvbmFsXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBEZWZpbmUgbyB0w610dWxvIGRvIGdhdWdlLlxuICAgKi9cbiAgQElucHV0KCdwLXRpdGxlJykgc2V0IHRpdGxlKHZhbHVlOiBzdHJpbmcpIHtcbiAgICB0aGlzLl90aXRsZSA9IHZhbHVlO1xuXG4gICAgdGhpcy5zdmdDb250YWluZXJTaXplKCk7XG4gIH1cblxuICBnZXQgdGl0bGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RpdGxlO1xuICB9XG5cbiAgLyoqXG4gICAqIEBvcHRpb25hbFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogVmFsb3IgcmVmZXJlbnRlIGFvIHZhbG9yIGRhIHPDqXJpZS4gU2V1IGNvbXBvcnRhbWVudG8gc2VndWUgYSBzZWd1aW50ZXMgcmVncmFzOlxuICAgKlxuICAgKiAtIFNlbSBgcC1yYW5nZXNgOiBPcyB2YWxvcmVzIHBhc3NhZG9zIHBhcmEgYHAtdmFsdWVgIGUgYHAtZGVzY3JpcHRpb25gIHNlcsOjbyBjZW50cmFsaXphZG9zIG5vIGludGVyaW9yIGRvIGFyY28uXG4gICAqIEEgYmFzZSBkbyB2YWxvciBzZXLDoSBwZXJjZW50dWFsIHRlbmRvIGNvbW8gYmFzZSBvcyBhbGNhbmNlcyBlbnRyZSB6ZXJvIGUgMTAwJS4gU2UgcGFzc2FkbyB1bSB2YWxvciBzdXBlcmlvciBhIDEwMCxcbiAgICogQSBjb2xvcml6YcOnw6NvIGRvIGdhdWdlIHNlcsOhIGNvbXBsZXRhIGUgbyB2YWxvciBwYXNzYWRvIHNlcsOhIGV4aWJpZG8gbm8gaW50ZXJpb3IgZG8gYXJjby5cbiAgICogLSBDb20gYHAtcmFuZ2VzYDogQSBkZXNjcmnDp8OjbyBzZXLDoSBleGliaWRhIGFjaW1hIGRvIGdhdWdlIGUgaGF2ZXLDoSB1bSBwb250ZWlybyBtYXJjYW5kbyBvIHZhbG9yIHBhc3NhZG8gZW0gYHAtdmFsdWVgLlxuICAgKiBDb25zaWRlcmFuZG8gcXVlIG8gYWxjYW5jZSBlbSBgcmFuZ2VzYCDDqSBhYmVydG8sIGVudMOjbyBhIGVzY2FsYSBkZSBgcC12YWx1ZWAgc2Vyw6EgZW0gcmVsYcOnw6NvIGFvIG1lbm9yL21haW9yIGFsY2FuY2VcbiAgICogYWJzb2x1dG8gZGVmaW5pZG8gZW0gYHAtcmFuZ2VzYC5cbiAgICogU2UgcGFzc2FkbyB1bSBgcC12YWx1ZWAgaW5mZXJpb3IgZW0gcmVsYcOnw6NvIGFvIG3DrW5pbW8gdmFsb3IgZGVmaW5pZG8gZW0gYHAtcmFuZ2VzYCwgbyBkb23DrW5pbyBtw61uaW1vIGRvIGdhdWdlIHBhcnRpcsOhIGRlIGBwLXZhbHVlYC5cbiAgICogQSBtZXNtYSByZWdyYSBwcmV2YWxlY2UgcGFyYSB2YWxvcmVzIG3DoXhpbW9zLlxuICAgKlxuICAgKi9cbiAgQElucHV0KCdwLXZhbHVlJykgc2V0IHZhbHVlKGdhdWdlVmFsdWU6IG51bWJlcikge1xuICAgIGlmICh0eXBlb2YgZ2F1Z2VWYWx1ZSA9PT0gJ251bWJlcicgfHwgKHR5cGVvZiBnYXVnZVZhbHVlID09PSAnc3RyaW5nJyAmJiAoPHN0cmluZz5nYXVnZVZhbHVlKS50cmltKCkpKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9ICFpc05hTihnYXVnZVZhbHVlKSA/IE51bWJlcihnYXVnZVZhbHVlKSA6IHVuZGVmaW5lZDtcblxuICAgICAgdGhpcy5fdmFsdWUgPSB2YWx1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fdmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG5cbiAgZ2V0IHZhbHVlKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX3ZhbHVlO1xuICB9XG5cbiAgY29uc3RydWN0b3IocHJvdGVjdGVkIGNvbG9yU2VydmljZTogUG9Db2xvclNlcnZpY2UpIHt9XG5cbiAgcHJpdmF0ZSB2ZXJpZnlDb2xvcnMocmFuZ2VzOiBBcnJheTxQb0dhdWdlUmFuZ2VzPikge1xuICAgIHJldHVybiB0aGlzLmNvbG9yU2VydmljZS5nZXRDb2xvcnM8UG9HYXVnZVJhbmdlcz4ocmFuZ2VzKTtcbiAgfVxuXG4gIHByaXZhdGUgc2V0R2F1Z2VIZWlnaHQoaGVpZ2h0OiBudW1iZXIpOiBudW1iZXIge1xuICAgIGNvbnN0IGdhdWdlSGVpZ2h0ID0gY29udmVydFRvSW50KGhlaWdodCk7XG5cbiAgICByZXR1cm4gZ2F1Z2VIZWlnaHQgJiYgZ2F1Z2VIZWlnaHQgPiBwb0dhdWdlTWluSGVpZ2h0ID8gZ2F1Z2VIZWlnaHQgOiBwb0dhdWdlTWluSGVpZ2h0O1xuICB9XG5cbiAgcHJvdGVjdGVkIGFic3RyYWN0IHN2Z0NvbnRhaW5lclNpemUoKTogdm9pZDtcbn1cbiJdfQ==